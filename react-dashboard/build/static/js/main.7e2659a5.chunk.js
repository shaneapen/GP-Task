(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{23:function(e,t,a){e.exports=a(48)},48:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(6),l=a.n(s),c=a(2),i=a(3),r=a(4),d=a(5),u=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={sidebarLinks:[{id:1,title:"Dashboard",href:"#",icon:"zmdi-home"},{id:2,title:"Website",href:"#",icon:"zmdi-view-compact"},{id:3,title:"Visitors",href:"#",icon:"zmdi-mouse"},{id:4,title:"Reviews",href:"#",icon:"zmdi-star"},{id:5,title:"Listings",href:"#",icon:"zmdi-format-list-bulleted"},{id:6,title:"Appointments",href:"#",icon:"zmdi-calendar"},{id:7,title:"Settings",href:"#",icon:"zmdi-settings"}]},e}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"sidebar"},o.a.createElement("header",null,o.a.createElement("a",{href:"#"},"GROWTH PLUG")),o.a.createElement("ul",{className:"nav"},this.state.sidebarLinks.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement("a",{href:e.href},o.a.createElement("i",{className:"zmdi "+e.icon})," ",e.title))}))))}}]),a}(o.a.Component),m=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar navbar-default"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("ul",{className:"nav navbar-nav navbar-right"},o.a.createElement("li",null,o.a.createElement("select",{name:"location",className:"location"},o.a.createElement("option",{value:"San Jose, CA"},"San Jose, CA"),o.a.createElement("option",{value:"Kochi"},"Kochi"))),o.a.createElement("li",null,o.a.createElement("a",{href:"/logout"},"Logout")))))}}]),a}(o.a.Component),h=a(11),g=a(22),b=a(8),f=a(9),p=a.n(f),E=function(e){var t=e.handleSave,a=e.handleClose,n=e.show,s=e.children,l=n?"modal display-block":"modal display-none";return o.a.createElement("div",{className:l},o.a.createElement("section",{className:"modal-main"},s,o.a.createElement("button",{className:"close-button",onClick:a},"X"),o.a.createElement("button",{onClick:t},"Save Changes")))},k=a(7),v=(a(45),function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).showModal=function(){e.setState({showModal:!0})},e.hideModal=function(){e.setState({showModal:!1})},e.state={facebookPage_id:"",facebookPage_name:"",facebookPage_address:"",facebookPage_phone:"",facebookPage_about:"",showModal:!1,updatingListingIndex:-1,listings:[{id:1,icon:"zmdi-google-plus",source:"Google",name:"ABC Dental",address:"2101 California St",phone:"111.111.1111",rating:"3/5",listed:!0,status:!0},{id:2,icon:"zmdi-globe",source:"Yelp",name:"ABC Dental",address:"2101 California St",phone:"111.111.1111",rating:"2/5",listed:!1,status:!1},{id:3,icon:"zmdi-yahoo",source:"Yahoo!",name:"ABC Dental",address:"2101 California St",phone:"111.111.1111",rating:"3/5",listed:!1,status:!1}]},e.commonChange=e.commonChange.bind(Object(b.a)(e)),e.saveChanges=e.saveChanges.bind(Object(b.a)(e)),e}return Object(i.a)(a,[{key:"commonChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"saveChanges",value:function(e){var t=this;k.b.info("Saving changes...");var a=this.state.listings[this.state.updatingListingIndex];p.a.post("https://graph.facebook.com/".concat(a.id),null,{params:{phone:this.state.facebookPage_phone,single_line_address:this.state.facebookPage_address,about:this.state.facebookPage_about,access_token:a.access_token}}).then((function(e){k.b.success("Changes saved successfully!"),t.hideModal()})).catch((function(e){k.b.error("Some error occured!"),console.log(e)})),a.phone=this.state.facebookPage_phone,a.address=this.state.facebookPage_address,a.about=this.state.facebookPage_about,this.state.facebookPage_address="",this.state.facebookPage_phone="",this.forceUpdate()}},{key:"getCookieValue",value:function(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}},{key:"getLongLivedUserToken",value:function(){var e="https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=".concat("2665949620330798","&client_secret=").concat("de251b9fe220d30867ac3c62666a1df3","&fb_exchange_token=").concat(this.getCookieValue("access_token"));p.a.get(e).then((function(e){return console.log(e.data)}))}},{key:"getUserManagedPages",value:function(){var e=this;Object(k.b)("Loading Facebook pages");var t=this.getCookieValue("access_token"),a=this.getCookieValue("uid");p.a.get("https://graph.facebook.com/".concat(a,"/accounts?access_token=").concat(t)).then((function(t){Object(h.a)(t.data.data).forEach((function(t){p.a.get("https://graph.facebook.com/".concat(t.id,"?fields=name,about,emails,website,single_line_address,is_published,phone&access_token=").concat(t.access_token)).then((function(a){var n={id:t.id,access_token:t.access_token,icon:"zmdi-facebook",source:"Facebook",name:t.name,about:a.data.about,address:a.data.single_line_address||"",phone:a.data.phone||"",rating:"",listed:a.data.is_published,status:!0};e.setState((function(e){return{listings:[].concat(Object(h.a)(e.listings),[n])}}))})).catch((function(e){return console.log(e)}))}))})).catch((function(e){alert("Some error occured in initial page listing. Check console for more details"),console.log("Error from getUserManagedPages() \n",e)}))}},{key:"updatePageMetaData",value:function(e){for(var t=this,a=0;a<this.state.listings.length;++a)if(e==this.state.listings[a].id){this.setState({updatingListingIndex:a},(function(){console.log(t.state.updatingListingIndex,"updatinglistinginexfromstate"),t.setState({facebookPage_id:t.state.listings[a].id||"",facebookPage_about:t.state.listings[a].about||"",facebookPage_name:t.state.listings[a].name||"",facebookPage_phone:t.state.listings[a].phone||"",facebookPage_address:t.state.listings[a].addres||""})}));break}this.showModal()}},{key:"componentDidMount",value:function(){this.getUserManagedPages()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"listings table-responsive"},o.a.createElement("div",{className:"text-center",style:{background:"#EEF5F4",padding:"1px 0px"}},o.a.createElement("h3",null,"Listings")),o.a.createElement(E,{show:this.state.showModal,handleSave:this.saveChanges,handleClose:this.hideModal},o.a.createElement("h2",null,"Update Page Details of ",this.state.facebookPage_name),o.a.createElement("p",null,"All values will be overwritten"),o.a.createElement("label",{htmlFor:"About"},"Description: "),o.a.createElement("textarea",{rows:"2",name:"facebookPage_about",id:"About",value:this.state.facebookPage_about,onChange:this.commonChange}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"phone"},"Phone: "),o.a.createElement("input",{type:"text",name:"facebookPage_phone",id:"phone",value:this.state.facebookPage_phone,onChange:this.commonChange}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"address"},"Single Line Address: "),o.a.createElement("input",{type:"text",name:"facebookPage_address",id:"address",value:this.state.facebookPage_address,onChange:this.commonChange}),o.a.createElement("br",null)),o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Source"),o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Address"),o.a.createElement("th",null,"Phone"),o.a.createElement("th",null,"Rating"),o.a.createElement("th",null,"Listed"),o.a.createElement("th",null,"Status"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,this.state.listings.map((function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,o.a.createElement("i",{className:"zmdi "+t.icon})),o.a.createElement("td",null,t.source),!t.status&&Math.random()>=.5?o.a.createElement("td",{className:"red"},t.name):o.a.createElement("td",null,t.name),!t.status&&Math.random()>=.5?o.a.createElement("td",{className:"red"},t.address||"-"):o.a.createElement("td",null,t.address||"-"),!t.status&&Math.random()>=.5?o.a.createElement("td",{className:"red"},t.phone||"-"):o.a.createElement("td",null,t.phone||"-"),!t.status&&Math.random()>=.5?o.a.createElement("td",{className:"red"},t.rating||"-"):o.a.createElement("td",null,t.rating||"-"),o.a.createElement("td",null,t.listed?"Yes":"No"),o.a.createElement("td",null,t.status?"\u2714\ufe0f":"\u274c"),o.a.createElement("td",null,"Facebook"===t.source?o.a.createElement("button",{className:"listing-update",onClick:function(a){return e.updatePageMetaData(t.id)}},"Update"):""))}))))),o.a.createElement(k.a,{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))}}]),a}(o.a.Component)),_=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement(m,null),o.a.createElement(v,null))}}]),a}(o.a.Component),C=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"viewport"},o.a.createElement(u,null),o.a.createElement(_,null))}}]),a}(o.a.Component);l.a.render(o.a.createElement(C,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.7e2659a5.chunk.js.map